# Japanese Games

This project is my personal hobby project enlisting the japanese animes that people watch all over the world.

## 1. Configuration

The configuration includes two-step process for pacakge installation and config files setup.

### 1.1 Package Installation

To setup the project for production, run:

```bash
npm install --production
```

Otherwise, run:

```bash
npm install

```

### 1.2 .env setup

Project by default doesn't have a `.env` file. You will need to setup a `.env` file using the `.env.example` file
provided.

**File: .env.example**

```
# Server Configuration
PORT=< APP-PORT-HERE >

# Database Configuration
MONGODB_CONNECTION_URL=< MONGODB-CONNECTION-URL-HERE >
MONGODB_DATABASE_NAME=< MONGODB-DATABASE-NAME-HERE >

# Pagination Defaults
QUERY_PAGE_DEFAULT=< DEFAULT-PAGE-HERE >
QUERY_SIZE_DEFAULT=< DEFAULT-SIZE-HERE >
QUERY_MAX_SIZE_DEFAULT=< MAX-SIZE-HERE >

# Mongoose Models and Collections
MONGODB_ANIME_MODEL_NAME=< ANIME-MODEL-NAME-HERE >
MONGODB_ANIME_COLLECTION_NAME=< ANIME-COLLECTION-NAME-HERE >
MONGODB_ANIME_CHARACTERS_DOCUMENT_NAME=< CHARACTERS-DOCUMENT-NAME-HERE >
MONGODB_USER_MODEL_NAME=< USER-MODEL-NAME-HERE >
MONGODB_USER_COLLECTION_NAME=< USER-COLLECTION-NAME-HERE >

# Validation Limits
MONGODB_USER_MODEL_NAME_MIN=< USER-MIN-NAME-LENGTH-HERE >
MONGODB_USER_MODEL_NAME_MAX=< USER-MAX-NAME-LENGTH-HERE >
MONGODB_ANIME_MODEL_NAME_MIN=< ANIME-MIN-NAME-LENGTH-HERE >
MONGODB_ANIME_MODEL_NAME_MAX=< ANIME-MAX-NAME-LENGTH-HERE >
MONGODB_ANIME_MODEL_STUDIO_MIN=< ANIME-MIN-STUDIO-LENGTH-HERE >
MONGODB_ANIME_MODEL_STUDIO_MAX=< ANIME-MAX-STUDIO-LENGTH-HERE >
MONGODB_ANIME_MODEL_CHARACTER_SUB_DOCUMENT_NAME_MIN=< CHARACTER-MIN-NAME-LENGTH-HERE >
MONGODB_ANIME_MODEL_CHARACTER_SUB_DOCUMENT_NAME_MAX=< CHARACTER-MAX-NAME-LENGTH-HERE >

# Bcrypt Configuration
BCRYPT_SALT_ROUNDS=< BCRYPT-SALT-ROUNDS-HERE >

# JWT Configuration
JWT_SECRET_KEY=< JWT-SECRET-KEY-HERE >

# Error Messages
ERROR_RESPONSE_SOMETHING_WENT_WRONG=< SOMETHING-WENT-WRONG-MESSAGE-HERE >
ERROR_RESPONSE_EMPTY_REQUEST_BODY=< EMPTY-REQUEST-BODY-MESSAGE-HERE >
ERROR_RESPONSE_ANIME_NOT_FOUND=< ANIME-NOT-FOUND-MESSAGE-HERE >
ERROR_RESPONSE_CHARACTER_NOT_FOUND=< CHARACTER-NOT-FOUND-MESSAGE-HERE >
ERROR_RESPONSE_USER_NOT_FOUND=< USER-NOT-FOUND-MESSAGE-HERE >
ERROR_RESPONSE_INVALID_OBJECT_ID=< INVALID-OBJECT-ID-MESSAGE-HERE >
ERROR_RESPONSE_ID_REQUIRED=< ID-REQUIRED-MESSAGE-HERE >
ERROR_RESPONSE_INVALID_PAGE_AND_SIZE_PARAMS=< INVALID-PAGE-AND-SIZE-MESSAGE-HERE >
ERROR_RESPONSE_UNAUTHORIZED=< UNAUTHORIZED-MESSAGE-HERE >
ERROR_RESPONSE_TOKEN_NOT_FOUND=< TOKEN-NOT-FOUND-MESSAGE-HERE >

# Success Messages
SUCCESS_RESPONSE_CHARACTER_ADDED=< CHARACTER-ADDED-MESSAGE-HERE >
SUCCESS_RESPONSE_CHARACTER_UPDATE=< CHARACTER-UPDATED-MESSAGE-HERE >

# HTTP Request Headers
HEADER_AUTHORIZATION=< AUTHORIZATION-HEADER-HERE >
CORS_HEADER_ACCESS_CONTROL_ALLOW_ORIGIN_KEY=< CORS-ALLOW-ORIGIN-KEY-HERE >
CORS_HEADER_ACCESS_CONTROL_ALLOW_ORIGIN_VALUE=< CORS-ALLOW-ORIGIN-VALUE-HERE >
CORS_HEADER_ACCESS_CONTROL_ALLOW_HEADERS_KEY=< CORS-ALLOW-HEADERS-KEY-HERE >
CORS_HEADER_ACCESS_CONTROL_ALLOW_HEADERS_VALUE=< CORS-ALLOW-HEADERS-VALUE-HERE >
CORS_HEADER_ACCESS_CONTROL_ALLOW_METHODS_KEY=< CORS-ALLOW-METHODS-KEY-HERE >
CORS_HEADER_ACCESS_CONTROL_ALLOW_METHODS_VALUE=< CORS-ALLOW-METHODS-VALUE-HERE >

# HTTP Status Codes
HTTP_STATUS_OK=< STATUS-OK-HERE >
HTTP_STATUS_CREATED=< STATUS-CREATED-HERE >
HTTP_STATUS_NO_CONTENT=< STATUS-NO-CONTENT-HERE >
HTTP_STATUS_BAD_REQUEST=< STATUS-BAD-REQUEST-HERE >
HTTP_STATUS_UNAUTHORIZED=< STATUS-UNAUTHORIZED-HERE >
HTTP_STATUS_FORBIDDEN=< STATUS-FORBIDDEN-HERE >
HTTP_STATUS_NOT_FOUND=< STATUS-NOT-FOUND-HERE >
HTTP_STATUS_INTERNAL_SERVER_ERROR=< STATUS-INTERNAL-SERVER-ERROR-HERE >

# API Routes
API_SUBSET_ROUTE_EMPTY=< ROUTE-EMPTY-HERE >
API_SUBSET_ROUTE_PARAM_ID=< ROUTE-PARAM-ID-HERE >
API_SUBSET_ROUTE_API_WITH_VERSION_V1=< ROUTE-API-V1-HERE >
API_SUBSET_ROUTE_AUTHENTICATION_ROUTE=< ROUTE-AUTHENTICATE-HERE >
API_SUBSET_ROUTE_FIND_BY_USERNAME_ROUTE=< ROUTE-FIND-BY-USERNAME-HERE >

API_ANIME_ANIME_SUBSET_ROUTE_ANIME=< ROUTE-ANIME-HERE >
API_ANIME_CHARACTER_SUBSET_ROUTE_CHARACTER=< ROUTE-CHARACTER-HERE >
API_ANIME_CHARACTER_SUBSET_ROUTE_CHARACTER_BY_ID=< ROUTE-CHARACTER-BY-ID-HERE >

API_USER_SUBSET_ROUTE_USERS=< ROUTE-USERS-HERE >

# Server Messages
SERVER_MESSAGE_LISTENING_ON_PORT=< LISTENING-ON-PORT-MESSAGE-HERE >
```

Sample `.env` would look as follows:

**File: .env**

```
PORT = 3000
MONGODB_CONNECTION_URL = mongodb://localhost:27017/japaneseAnime
MONGODB_DATABASE_NAME = japaneseAnime

QUERY_PAGE_DEFAULT = 1
QUERY_SIZE_DEFAULT = 5
QUERY_MAX_SIZE_DEFAULT = 10

MONGODB_ANIME_MODEL_NAME = Anime
MONGODB_ANIME_COLLECTION_NAME = anime

MONGODB_ANIME_CHARACTERS_DOCUMENT_NAME = characters
MONGODB_USER_MODEL_NAME = User
MONGODB_USER_COLLECTION_NAME = users

# MONGODB validations
MONGODB_USER_MODEL_NAME_MIN = 3
MONGODB_USER_MODEL_NAME_MAX = 80

MONGODB_ANIME_MODEL_NAME_MIN = 3
MONGODB_ANIME_MODEL_NAME_MAX = 80
MONGODB_ANIME_MODEL_STUDIO_MIN = 2
MONGODB_ANIME_MODEL_STUDIO_MAX = 50
MONGODB_ANIME_MODEL_CHARACTER_SUB_DOCUMENT_NAME_MIN = 2
MONGODB_ANIME_MODEL_CHARACTER_SUB_DOCUMENT_NAME_MAX = 50

# bcrypt
BCRYPT_SALT_ROUNDS = 12

# jwt
JWT_SECRET_KEY = 1b59d8416429e9449d4a6e108c21c07597bdd006c242360a4d59b399ac5e3f19


# Error Messages
ERROR_RESPONSE_SOMETHING_WENT_WRONG = Something went wrong.
ERROR_RESPONSE_EMPTY_REQUEST_BODY = Request body cannot be empty.
ERROR_RESPONSE_ANIME_NOT_FOUND = Anime not found.
ERROR_RESPONSE_CHARACTER_NOT_FOUND = Character Not Found
ERROR_RESPONSE_USER_NOT_FOUND = User not found.
ERROR_RESPONSE_INVALID_OBJECT_ID = Id is invalid.
ERROR_RESPONSE_ID_REQUIRED = ID is required.
ERROR_RESPONSE_INVALID_PAGE_AND_SIZE_PARAMS = Page and size must be greater than one and size cannot be greater than
ERROR_RESPONSE_UNAUTHORIZED = Unauthorized
ERROR_RESPONSE_TOKEN_NOT_FOUND = Token not found

# Success messages
SUCCESS_RESPONSE_CHARACTER_ADDED = Character added successfully.
SUCCESS_RESPONSE_CHARACTER_UPDATE = Character updated successfully.


# HTTP Request Headers
HEADER_AUTHORIZATION = authorization
CORS_HEADER_ACCESS_CONTROL_ALLOW_ORIGIN_KEY = Access-Control-Allow-Origin
CORS_HEADER_ACCESS_CONTROL_ALLOW_ORIGIN_VALUE = http://localhost:4200
CORS_HEADER_ACCESS_CONTROL_ALLOW_HEADERS_KEY = Access-Control-Allow-Headers
CORS_HEADER_ACCESS_CONTROL_ALLOW_HEADERS_VALUE = Origin, X-Requested-With, Content-Type, Accept, Authorization
CORS_HEADER_ACCESS_CONTROL_ALLOW_METHODS_KEY = Access-Control-Allow-Methods
CORS_HEADER_ACCESS_CONTROL_ALLOW_METHODS_VALUE = GET,PUT,POST,PATCH,DELETE



# HTTP Status Code
HTTP_STATUS_OK = 200
HTTP_STATUS_CREATED = 201
HTTP_STATUS_NO_CONTENT = 204
HTTP_STATUS_BAD_REQUEST = 400
HTTP_STATUS_UNAUTHORIZED = 401
HTTP_STATUS_FORBIDDEN = 403
HTTP_STATUS_NOT_FOUND = 404
HTTP_STATUS_INTERNAL_SERVER_ERROR = 500

# API Routes
API_SUBSET_ROUTE_EMPTY = ''
API_SUBSET_ROUTE_PARAM_ID = /:id
API_SUBSET_ROUTE_API_WITH_VERSION_V1 = /api/v1
API_SUBSET_ROUTE_AUTHENTICATION_ROUTE = /authenticate
API_SUBSET_ROUTE_FIND_BY_USERNAME_ROUTE = /:username

API_ANIME_ANIME_SUBSET_ROUTE_ANIME = /anime
API_ANIME_CHARACTER_SUBSET_ROUTE_CHARACTER = /:id/characters
API_ANIME_CHARACTER_SUBSET_ROUTE_CHARACTER_BY_ID = /:id/characters/:characterId

API_USER_SUBSET_ROUTE_USERS = /users

# Server messages
SERVER_MESSAGE_LISTENING_ON_PORT = Listening on port:
```

## 2. Importing Data to MongoDB

We have a file inside `data/anime.json`

```bash
mongoimport -d japaneseAnime -c anime --file=data/anime.json --jsonArray --drop
```

> **NOTE:** Be careful when copy-pasting above commands. We are dropping all data before importing the collection. Make
> sure you really want to drop it as you'll not be asked for confirmation.<br><br>You might need to include a separate
> DB_URL if your `mongodb` is on a different machine over the network.

## 3. Token Secret key generator

Use this command to generate a 32-byte hex string for secret.

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

## 4. Running the application

Running `npm start` will install the packages for both frontend and backend. And, run both of them for you.

```bash
npm start

```

## 5. Feedback

I have done my very best to follow SOLID, DRY and KISS principles to the best of my knowledge. However, I may fall short
on some instances.

Your feedback on sakai or my student email avaialbe to you would be greatly appreaciated. Your feedback could be the ONE
thing I might be missing in my life for breaking BIG.

Thank you for having your look into the project and giving me your time. I hope you have a blessed day.


